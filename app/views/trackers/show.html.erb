
<div class="profile-header-wrapper">
  <div class="container profile-header-container text-center">
    <div class="profile-header-infos">
      <!-- <img src="trump.jpeg" alt=""> -->
      <%= image_tag @tracker.photo_url, class: "avatar-bordered" %>
      <h1><%= @tracker.username.capitalize %></h1>
      <h2></h2>
    </div>
    <div class="tabs">
      <a class="tab active" data-target="#votes">
        <h3>Upvotes</h3>
      </a>
      <a class="tab" data-target="#comments">
        <h3>Comments</h3>
      </a>
      <a class="tab" data-target="#tracks">
        <h3>Tracks</h3>
      </a>
    </div>
  </div>
</div>

<div class="container text-center">
  <div class="tab-content" id="votes">
    <div class= "container product-container">
      <h4> Upvotes </h4>
      <!-- TODO : Link to profile page of the track -->
      <% trackz = [] %>
      <% @tracker.votes.each do |vote| %>
      <% trackz << Track.find_by_id(vote.track_id) %>
      <% end %>

      <% trackz.each do |track| %>
      <% if track.soundcloud_permalink_url != nil %>
      <div class="product">
        <div class='product-upvote'>
          <div class="product-arrow"></div>
          <%= button_to '+1', upvote_track_path(track), method: :patch, class: "product-arrow" %>
          <%= (track.votes.count) %>
        </div>
        <%= image_path '' , class: "product-image hidden-xs"%>
        <div class='product-body'>
         <h5><%= link_to track.name, track_path(track) %></h5>
         <p><%= track.genre %></p>
         <small><%= track.version %></small>
         <p class="track-comment-size"><%= pluralize track.comments.size, "comment" %></p>
       </div>
       <ul class="list-inline product-controls product-controls-hidden hidden-sm hidden-xs">
         <iframe id="soundcloud_player"src=<%= "//w.soundcloud.com/player/?url=#{track.soundcloud_permalink_url}&show_artwork=true&liking=false&sharing=false&auto_play=false"%> 
           style= 
           width="400"
           height="100"
           frameborder="no"
           padding="0px"
           ></iframe>
         </ul>
       </div>
       <% end %>
       <% end %>
     </div>
   </div>

  <div class="tab-content hidden" id="comments">
    <p>Tracks you have commented</p>

    <% tracks = [] %>
    <% counter = 0 %>
    <% @tracker.tracks.each do |track| %>
      <% if track.soundcloud_permalink_url != nil %>
        <script src="<%= track.soundcloud_permalink_url %>"></script>
        <div class="player">
          <span class='info'></span>
          <div class="waveform"></div>
          <div class="position"></div>
        </div>
        <iframe class="sc-widget" src=<%= "//w.soundcloud.com/player/?url=#{track.soundcloud_permalink_url}" %>>
        </iframe>

          <% @tracker.comments.each do |comment| %>
          <% tracks << Track.find_by_id(comment.track_id) %>
          <p><%= comment.content %></p>
            <!-- <a class="card-link" href="#" ></a> -->
          </div>
        <% end %>
        <% counter += 1 %>
      <% end %>
    <% end %>
  </div>

  <div class="tab-content hidden" id="tracks">
  <div class= "container product-container">
   <h4>Tracks uploaded by @tracker.username</h4>
   <% @tracker.tracks.each do |track| %>
   <% if track.soundcloud_permalink_url != nil %>
   <div class="product">
    <div class='product-upvote'>
      <div class="product-arrow"></div>
      <%= button_to '+1', upvote_track_path(track), method: :patch, class: "product-arrow" %>
      <%= (track.votes.count) %>
    </div>
    <%= image_path '' , class: "product-image hidden-xs"%>
    <div class='product-body'>
     <h5><%= link_to track.name, track_path(track) %></h5>
     <p><%= track.genre %></p>
     <small><%= track.version %></small>
     <p class="track-comment-size"><%= pluralize track.comments.size, "comment" %></p>
   </div>
   <ul class="list-inline product-controls product-controls-hidden hidden-sm hidden-xs">
     <iframe id="soundcloud_player"src=<%= "//w.soundcloud.com/player/?url=#{track.soundcloud_permalink_url}&show_artwork=true&liking=false&sharing=false&auto_play=false"%> 
       style= 
       width="400"
       height="100"
       frameborder="no"
       padding="0px"
       ></iframe>
     </ul>
   </div>
   <% end %>
   <% end %>
 </div>
</div>
